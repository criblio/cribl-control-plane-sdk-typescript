/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../lib/schemas.js";
import * as openEnums from "../types/enums.js";
import { ClosedEnum, OpenEnum } from "../types/enums.js";
import { Result as SafeParseResult } from "../types/fp.js";
import { SDKValidationError } from "./errors/sdkvalidationerror.js";

/**
 * Defines how task discovery will be performed. Use None to skip the discovery. Use HTTP Request to make a REST call to discover tasks. Use Item List to enumerate items for collect to retrieve. Use JSON Response to manually define discover tasks as a JSON array of objects. Each entry returned by the discover operation will result in a collect task.
 */
export const CollectorHealthCheckDiscoverType = {
  /**
   * HTTP Request
   */
  Http: "http",
  /**
   * JSON Response
   */
  Json: "json",
  /**
   * Item List
   */
  List: "list",
  /**
   * None
   */
  None: "none",
} as const;
/**
 * Defines how task discovery will be performed. Use None to skip the discovery. Use HTTP Request to make a REST call to discover tasks. Use Item List to enumerate items for collect to retrieve. Use JSON Response to manually define discover tasks as a JSON array of objects. Each entry returned by the discover operation will result in a collect task.
 */
export type CollectorHealthCheckDiscoverType = OpenEnum<
  typeof CollectorHealthCheckDiscoverType
>;

export type CollectorHealthCheckDiscovery = {
  /**
   * Defines how task discovery will be performed. Use None to skip the discovery. Use HTTP Request to make a REST call to discover tasks. Use Item List to enumerate items for collect to retrieve. Use JSON Response to manually define discover tasks as a JSON array of objects. Each entry returned by the discover operation will result in a collect task.
   */
  discoverType?: CollectorHealthCheckDiscoverType | undefined;
};

/**
 * Health check HTTP method.
 */
export const HealthCheckMethod = {
  /**
   * GET
   */
  Get: "get",
  /**
   * POST
   */
  Post: "post",
  /**
   * POST with Body
   */
  PostWithBody: "post_with_body",
} as const;
/**
 * Health check HTTP method.
 */
export type HealthCheckMethod = OpenEnum<typeof HealthCheckMethod>;

export type CollectorHealthCheckCollectRequestHeader = {
  /**
   * Header Name
   */
  name: string;
  /**
   * JavaScript expression to compute the header value (can be a constant).
   */
  value: string;
};

/**
 * Authentication method for Discover and Collect REST calls. You can specify API Key–based authentication by adding the appropriate Collect headers.
 */
export const CollectorHealthCheckAuthentication = {
  None: "none",
  Basic: "basic",
  BasicSecret: "basicSecret",
  Login: "login",
  LoginSecret: "loginSecret",
  Oauth: "oauth",
  OauthSecret: "oauthSecret",
} as const;
/**
 * Authentication method for Discover and Collect REST calls. You can specify API Key–based authentication by adding the appropriate Collect headers.
 */
export type CollectorHealthCheckAuthentication = OpenEnum<
  typeof CollectorHealthCheckAuthentication
>;

export const CollectorHealthCheckHiddenDefaultBreakers = {
  Cribl: "Cribl",
} as const;
export type CollectorHealthCheckHiddenDefaultBreakers = OpenEnum<
  typeof CollectorHealthCheckHiddenDefaultBreakers
>;

/**
 * The algorithm to use when performing HTTP retries
 */
export const CollectorHealthCheckRetryType = {
  /**
   * Disabled
   */
  None: "none",
  /**
   * Backoff
   */
  Backoff: "backoff",
  /**
   * Static
   */
  Static: "static",
} as const;
/**
 * The algorithm to use when performing HTTP retries
 */
export type CollectorHealthCheckRetryType = OpenEnum<
  typeof CollectorHealthCheckRetryType
>;

export type CollectorHealthCheckRetryRules = {
  /**
   * The algorithm to use when performing HTTP retries
   */
  type?: CollectorHealthCheckRetryType | undefined;
  interval?: any | undefined;
  limit?: any | undefined;
  multiplier?: any | undefined;
  codes?: any | undefined;
  enableHeader?: any | undefined;
};

/**
 * Collector type: health_check
 */
export const CollectorHealthCheckType = {
  HealthCheck: "health_check",
} as const;
/**
 * Collector type: health_check
 */
export type CollectorHealthCheckType = ClosedEnum<
  typeof CollectorHealthCheckType
>;

export type CollectorHealthCheck = {
  discovery?: CollectorHealthCheckDiscovery | undefined;
  /**
   * Expression to derive URL to use for the health check operation (can be a constant).
   */
  collectUrl: string;
  /**
   * Health check HTTP method.
   */
  collectMethod?: HealthCheckMethod | undefined;
  collectRequestParams?: any | undefined;
  collectBody?: any | undefined;
  /**
   * Optional health check request headers.
   */
  collectRequestHeaders?:
    | Array<CollectorHealthCheckCollectRequestHeader>
    | undefined;
  /**
   * Enable to make auth health check call.
   */
  authenticateCollect?: boolean | undefined;
  /**
   * Authentication method for Discover and Collect REST calls. You can specify API Key–based authentication by adding the appropriate Collect headers.
   */
  authentication?: CollectorHealthCheckAuthentication | undefined;
  /**
   * HTTP request inactivity timeout, use 0 to disable
   */
  timeout?: number | undefined;
  /**
   * Whether to reject certificates that cannot be verified against a valid CA (e.g., self-signed certificates).
   */
  rejectUnauthorized?: boolean | undefined;
  defaultBreakers?: CollectorHealthCheckHiddenDefaultBreakers | undefined;
  /**
   * List of headers that are safe to log in plain text.
   */
  safeHeaders?: Array<string> | undefined;
  retryRules?: CollectorHealthCheckRetryRules | undefined;
  /**
   * Collector type: health_check
   */
  type: CollectorHealthCheckType;
};

/** @internal */
export const CollectorHealthCheckDiscoverType$inboundSchema: z.ZodType<
  CollectorHealthCheckDiscoverType,
  z.ZodTypeDef,
  unknown
> = openEnums.inboundSchema(CollectorHealthCheckDiscoverType);

/** @internal */
export const CollectorHealthCheckDiscovery$inboundSchema: z.ZodType<
  CollectorHealthCheckDiscovery,
  z.ZodTypeDef,
  unknown
> = z.object({
  discoverType: CollectorHealthCheckDiscoverType$inboundSchema.default("none"),
});

export function collectorHealthCheckDiscoveryFromJSON(
  jsonString: string,
): SafeParseResult<CollectorHealthCheckDiscovery, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => CollectorHealthCheckDiscovery$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'CollectorHealthCheckDiscovery' from JSON`,
  );
}

/** @internal */
export const HealthCheckMethod$inboundSchema: z.ZodType<
  HealthCheckMethod,
  z.ZodTypeDef,
  unknown
> = openEnums.inboundSchema(HealthCheckMethod);

/** @internal */
export const CollectorHealthCheckCollectRequestHeader$inboundSchema: z.ZodType<
  CollectorHealthCheckCollectRequestHeader,
  z.ZodTypeDef,
  unknown
> = z.object({
  name: z.string(),
  value: z.string(),
});

export function collectorHealthCheckCollectRequestHeaderFromJSON(
  jsonString: string,
): SafeParseResult<
  CollectorHealthCheckCollectRequestHeader,
  SDKValidationError
> {
  return safeParse(
    jsonString,
    (x) =>
      CollectorHealthCheckCollectRequestHeader$inboundSchema.parse(
        JSON.parse(x),
      ),
    `Failed to parse 'CollectorHealthCheckCollectRequestHeader' from JSON`,
  );
}

/** @internal */
export const CollectorHealthCheckAuthentication$inboundSchema: z.ZodType<
  CollectorHealthCheckAuthentication,
  z.ZodTypeDef,
  unknown
> = openEnums.inboundSchema(CollectorHealthCheckAuthentication);

/** @internal */
export const CollectorHealthCheckHiddenDefaultBreakers$inboundSchema: z.ZodType<
  CollectorHealthCheckHiddenDefaultBreakers,
  z.ZodTypeDef,
  unknown
> = openEnums.inboundSchema(CollectorHealthCheckHiddenDefaultBreakers);

/** @internal */
export const CollectorHealthCheckRetryType$inboundSchema: z.ZodType<
  CollectorHealthCheckRetryType,
  z.ZodTypeDef,
  unknown
> = openEnums.inboundSchema(CollectorHealthCheckRetryType);

/** @internal */
export const CollectorHealthCheckRetryRules$inboundSchema: z.ZodType<
  CollectorHealthCheckRetryRules,
  z.ZodTypeDef,
  unknown
> = z.object({
  type: CollectorHealthCheckRetryType$inboundSchema.default("backoff"),
  interval: z.any().optional(),
  limit: z.any().optional(),
  multiplier: z.any().optional(),
  codes: z.any().optional(),
  enableHeader: z.any().optional(),
});

export function collectorHealthCheckRetryRulesFromJSON(
  jsonString: string,
): SafeParseResult<CollectorHealthCheckRetryRules, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => CollectorHealthCheckRetryRules$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'CollectorHealthCheckRetryRules' from JSON`,
  );
}

/** @internal */
export const CollectorHealthCheckType$inboundSchema: z.ZodNativeEnum<
  typeof CollectorHealthCheckType
> = z.nativeEnum(CollectorHealthCheckType);

/** @internal */
export const CollectorHealthCheck$inboundSchema: z.ZodType<
  CollectorHealthCheck,
  z.ZodTypeDef,
  unknown
> = z.object({
  discovery: z.lazy(() => CollectorHealthCheckDiscovery$inboundSchema)
    .optional(),
  collectUrl: z.string(),
  collectMethod: HealthCheckMethod$inboundSchema.default("get"),
  collectRequestParams: z.any().optional(),
  collectBody: z.any().optional(),
  collectRequestHeaders: z.array(
    z.lazy(() => CollectorHealthCheckCollectRequestHeader$inboundSchema),
  ).optional(),
  authenticateCollect: z.boolean().default(false),
  authentication: CollectorHealthCheckAuthentication$inboundSchema.default(
    "none",
  ),
  timeout: z.number().default(30),
  rejectUnauthorized: z.boolean().default(false),
  defaultBreakers: CollectorHealthCheckHiddenDefaultBreakers$inboundSchema
    .optional(),
  safeHeaders: z.array(z.string()).optional(),
  retryRules: z.lazy(() => CollectorHealthCheckRetryRules$inboundSchema)
    .optional(),
  type: CollectorHealthCheckType$inboundSchema,
});

export function collectorHealthCheckFromJSON(
  jsonString: string,
): SafeParseResult<CollectorHealthCheck, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => CollectorHealthCheck$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'CollectorHealthCheck' from JSON`,
  );
}
