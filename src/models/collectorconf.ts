/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../lib/schemas.js";
import { Result as SafeParseResult } from "../types/fp.js";
import {
  CollectorAzureBlob,
  CollectorAzureBlob$inboundSchema,
} from "./collectorazureblob.js";
import {
  CollectorCriblLake,
  CollectorCriblLake$inboundSchema,
} from "./collectorcribllake.js";
import {
  CollectorDatabase,
  CollectorDatabase$inboundSchema,
} from "./collectordatabase.js";
import {
  CollectorFilesystem,
  CollectorFilesystem$inboundSchema,
} from "./collectorfilesystem.js";
import {
  CollectorGoogleCloudStorage,
  CollectorGoogleCloudStorage$inboundSchema,
} from "./collectorgooglecloudstorage.js";
import {
  CollectorHealthCheck,
  CollectorHealthCheck$inboundSchema,
} from "./collectorhealthcheck.js";
import { CollectorRest, CollectorRest$inboundSchema } from "./collectorrest.js";
import { CollectorS3, CollectorS3$inboundSchema } from "./collectors3.js";
import {
  CollectorScript,
  CollectorScript$inboundSchema,
} from "./collectorscript.js";
import {
  CollectorSplunk,
  CollectorSplunk$inboundSchema,
} from "./collectorsplunk.js";
import { SDKValidationError } from "./errors/sdkvalidationerror.js";

/**
 * Collector configuration
 */
export type CollectorConf =
  | (CollectorDatabase & { type: "database" })
  | (CollectorScript & { type: "script" })
  | (CollectorAzureBlob & { type: "azure_blob" })
  | (CollectorCriblLake & { type: "cribl_lake" })
  | (CollectorFilesystem & { type: "filesystem" })
  | (CollectorGoogleCloudStorage & { type: "google_cloud_storage" })
  | (CollectorHealthCheck & { type: "health_check" })
  | (CollectorRest & { type: "rest" })
  | (CollectorS3 & { type: "s3" })
  | (CollectorSplunk & { type: "splunk" });

/** @internal */
export const CollectorConf$inboundSchema: z.ZodType<
  CollectorConf,
  z.ZodTypeDef,
  unknown
> = z.union([
  CollectorDatabase$inboundSchema.and(
    z.object({ type: z.literal("database") }),
  ),
  CollectorScript$inboundSchema.and(z.object({ type: z.literal("script") })),
  CollectorAzureBlob$inboundSchema.and(
    z.object({ type: z.literal("azure_blob") }),
  ),
  CollectorCriblLake$inboundSchema.and(
    z.object({ type: z.literal("cribl_lake") }),
  ),
  CollectorFilesystem$inboundSchema.and(
    z.object({ type: z.literal("filesystem") }),
  ),
  CollectorGoogleCloudStorage$inboundSchema.and(
    z.object({ type: z.literal("google_cloud_storage") }),
  ),
  CollectorHealthCheck$inboundSchema.and(
    z.object({ type: z.literal("health_check") }),
  ),
  CollectorRest$inboundSchema.and(z.object({ type: z.literal("rest") })),
  CollectorS3$inboundSchema.and(z.object({ type: z.literal("s3") })),
  CollectorSplunk$inboundSchema.and(z.object({ type: z.literal("splunk") })),
]);

export function collectorConfFromJSON(
  jsonString: string,
): SafeParseResult<CollectorConf, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => CollectorConf$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'CollectorConf' from JSON`,
  );
}
