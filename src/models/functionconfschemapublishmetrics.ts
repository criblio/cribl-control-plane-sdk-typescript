/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../lib/schemas.js";
import * as openEnums from "../types/enums.js";
import { OpenEnum } from "../types/enums.js";
import { Result as SafeParseResult } from "../types/fp.js";
import * as types from "../types/primitives.js";
import { SDKValidationError } from "./errors/sdkvalidationerror.js";

export const FunctionConfSchemaPublishMetricsMetricType = {
  /**
   * Counter
   */
  Counter: "counter",
  /**
   * Timer
   */
  Timer: "timer",
  /**
   * Gauge
   */
  Gauge: "gauge",
  /**
   * Distribution
   */
  Distribution: "distribution",
  /**
   * Summary
   */
  Summary: "summary",
  /**
   * Histogram
   */
  Histogram: "histogram",
} as const;
export type FunctionConfSchemaPublishMetricsMetricType = OpenEnum<
  typeof FunctionConfSchemaPublishMetricsMetricType
>;

export type FunctionConfSchemaPublishMetricsField = {
  /**
   * The name of the field in the event that contains the metric value
   */
  inFieldName: string;
  /**
   * JavaScript expression to evaluate the metric field name. Defaults to Event Field Name.
   */
  outFieldExpr?: string | undefined;
  metricType: FunctionConfSchemaPublishMetricsMetricType;
};

export type FunctionConfSchemaPublishMetrics = {
  /**
   * List of metrics from event to extract and format. Formatted metrics can be used by a destination to pass metrics to a metrics aggregation platform.
   */
  fields?: Array<FunctionConfSchemaPublishMetricsField> | undefined;
  /**
   * Overwrite previous metric specs. Leave disabled to append.
   */
  overwrite?: boolean | undefined;
  /**
   * Optional list of dimensions to include in events. Wildcards supported. If you don't specify metrics, values will be appended to every metric found in the event. When you add a new metric, dimensions will be present only in those new metrics.
   */
  dimensions?: Array<string> | undefined;
  /**
   * Optional list of metric field names to look for when removing metrics. When a metric's field name matches an element in this list, the metric will be removed from the event.
   */
  removeMetrics?: Array<string> | undefined;
  /**
   * Optional list of dimensions to remove from every metric found in the event. Wildcards supported.
   */
  removeDimensions?: Array<string> | undefined;
};

/** @internal */
export const FunctionConfSchemaPublishMetricsMetricType$inboundSchema:
  z.ZodType<FunctionConfSchemaPublishMetricsMetricType, z.ZodTypeDef, unknown> =
    openEnums.inboundSchema(FunctionConfSchemaPublishMetricsMetricType);
/** @internal */
export const FunctionConfSchemaPublishMetricsMetricType$outboundSchema:
  z.ZodType<string, z.ZodTypeDef, FunctionConfSchemaPublishMetricsMetricType> =
    openEnums.outboundSchema(FunctionConfSchemaPublishMetricsMetricType);

/** @internal */
export const FunctionConfSchemaPublishMetricsField$inboundSchema: z.ZodType<
  FunctionConfSchemaPublishMetricsField,
  z.ZodTypeDef,
  unknown
> = z.object({
  inFieldName: types.string(),
  outFieldExpr: types.optional(types.string()),
  metricType: FunctionConfSchemaPublishMetricsMetricType$inboundSchema,
});
/** @internal */
export type FunctionConfSchemaPublishMetricsField$Outbound = {
  inFieldName: string;
  outFieldExpr?: string | undefined;
  metricType: string;
};

/** @internal */
export const FunctionConfSchemaPublishMetricsField$outboundSchema: z.ZodType<
  FunctionConfSchemaPublishMetricsField$Outbound,
  z.ZodTypeDef,
  FunctionConfSchemaPublishMetricsField
> = z.object({
  inFieldName: z.string(),
  outFieldExpr: z.string().optional(),
  metricType: FunctionConfSchemaPublishMetricsMetricType$outboundSchema,
});

export function functionConfSchemaPublishMetricsFieldToJSON(
  functionConfSchemaPublishMetricsField: FunctionConfSchemaPublishMetricsField,
): string {
  return JSON.stringify(
    FunctionConfSchemaPublishMetricsField$outboundSchema.parse(
      functionConfSchemaPublishMetricsField,
    ),
  );
}
export function functionConfSchemaPublishMetricsFieldFromJSON(
  jsonString: string,
): SafeParseResult<FunctionConfSchemaPublishMetricsField, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) =>
      FunctionConfSchemaPublishMetricsField$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'FunctionConfSchemaPublishMetricsField' from JSON`,
  );
}

/** @internal */
export const FunctionConfSchemaPublishMetrics$inboundSchema: z.ZodType<
  FunctionConfSchemaPublishMetrics,
  z.ZodTypeDef,
  unknown
> = z.object({
  fields: types.optional(
    z.array(z.lazy(() => FunctionConfSchemaPublishMetricsField$inboundSchema)),
  ),
  overwrite: types.optional(types.boolean()),
  dimensions: types.optional(z.array(types.string())),
  removeMetrics: types.optional(z.array(types.string())),
  removeDimensions: types.optional(z.array(types.string())),
});
/** @internal */
export type FunctionConfSchemaPublishMetrics$Outbound = {
  fields?: Array<FunctionConfSchemaPublishMetricsField$Outbound> | undefined;
  overwrite?: boolean | undefined;
  dimensions?: Array<string> | undefined;
  removeMetrics?: Array<string> | undefined;
  removeDimensions?: Array<string> | undefined;
};

/** @internal */
export const FunctionConfSchemaPublishMetrics$outboundSchema: z.ZodType<
  FunctionConfSchemaPublishMetrics$Outbound,
  z.ZodTypeDef,
  FunctionConfSchemaPublishMetrics
> = z.object({
  fields: z.array(
    z.lazy(() => FunctionConfSchemaPublishMetricsField$outboundSchema),
  ).optional(),
  overwrite: z.boolean().optional(),
  dimensions: z.array(z.string()).optional(),
  removeMetrics: z.array(z.string()).optional(),
  removeDimensions: z.array(z.string()).optional(),
});

export function functionConfSchemaPublishMetricsToJSON(
  functionConfSchemaPublishMetrics: FunctionConfSchemaPublishMetrics,
): string {
  return JSON.stringify(
    FunctionConfSchemaPublishMetrics$outboundSchema.parse(
      functionConfSchemaPublishMetrics,
    ),
  );
}
export function functionConfSchemaPublishMetricsFromJSON(
  jsonString: string,
): SafeParseResult<FunctionConfSchemaPublishMetrics, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => FunctionConfSchemaPublishMetrics$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'FunctionConfSchemaPublishMetrics' from JSON`,
  );
}
