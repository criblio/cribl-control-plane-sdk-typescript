/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../lib/schemas.js";
import { Result as SafeParseResult } from "../types/fp.js";
import * as types from "../types/primitives.js";
import { smartUnion } from "../types/smartUnion.js";
import { DiffLine, DiffLine$inboundSchema } from "./diffline.js";
import { SDKValidationError } from "./errors/sdkvalidationerror.js";

export type Block = {
  header: string;
  /**
   * Diff Line
   */
  lines: Array<DiffLine>;
  newStartLine: number;
  oldStartLine: number;
  oldStartLine2?: number | undefined;
};

export type ChecksumBefore = string | Array<string>;

export type OldMode = string | Array<string>;

export type DiffFiles = {
  addedLines: number;
  blocks: Array<Block>;
  changedPercentage?: number | undefined;
  checksumAfter?: string | undefined;
  checksumBefore?: string | Array<string> | undefined;
  deletedFileMode?: string | undefined;
  deletedLines: number;
  isBinary?: boolean | undefined;
  isCombined: boolean;
  isCopy?: boolean | undefined;
  isDeleted?: boolean | undefined;
  isGitDiff: boolean;
  isNew?: boolean | undefined;
  isRename?: boolean | undefined;
  isTooBig?: boolean | undefined;
  language: string;
  mode?: string | undefined;
  newFileMode?: string | undefined;
  newMode?: string | undefined;
  newName: string;
  oldMode?: string | Array<string> | undefined;
  oldName: string;
  unchangedPercentage?: number | undefined;
};

/** @internal */
export const Block$inboundSchema: z.ZodType<Block, z.ZodTypeDef, unknown> = z
  .object({
    header: types.string(),
    lines: z.array(DiffLine$inboundSchema),
    newStartLine: types.number(),
    oldStartLine: types.number(),
    oldStartLine2: types.optional(types.number()),
  });

export function blockFromJSON(
  jsonString: string,
): SafeParseResult<Block, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Block$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Block' from JSON`,
  );
}

/** @internal */
export const ChecksumBefore$inboundSchema: z.ZodType<
  ChecksumBefore,
  z.ZodTypeDef,
  unknown
> = smartUnion([types.string(), z.array(types.string())]);

export function checksumBeforeFromJSON(
  jsonString: string,
): SafeParseResult<ChecksumBefore, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => ChecksumBefore$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'ChecksumBefore' from JSON`,
  );
}

/** @internal */
export const OldMode$inboundSchema: z.ZodType<OldMode, z.ZodTypeDef, unknown> =
  smartUnion([types.string(), z.array(types.string())]);

export function oldModeFromJSON(
  jsonString: string,
): SafeParseResult<OldMode, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => OldMode$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'OldMode' from JSON`,
  );
}

/** @internal */
export const DiffFiles$inboundSchema: z.ZodType<
  DiffFiles,
  z.ZodTypeDef,
  unknown
> = z.object({
  addedLines: types.number(),
  blocks: z.array(z.lazy(() => Block$inboundSchema)),
  changedPercentage: types.optional(types.number()),
  checksumAfter: types.optional(types.string()),
  checksumBefore: types.optional(
    smartUnion([types.string(), z.array(types.string())]),
  ),
  deletedFileMode: types.optional(types.string()),
  deletedLines: types.number(),
  isBinary: types.optional(types.boolean()),
  isCombined: types.boolean(),
  isCopy: types.optional(types.boolean()),
  isDeleted: types.optional(types.boolean()),
  isGitDiff: types.boolean(),
  isNew: types.optional(types.boolean()),
  isRename: types.optional(types.boolean()),
  isTooBig: types.optional(types.boolean()),
  language: types.string(),
  mode: types.optional(types.string()),
  newFileMode: types.optional(types.string()),
  newMode: types.optional(types.string()),
  newName: types.string(),
  oldMode: types.optional(
    smartUnion([types.string(), z.array(types.string())]),
  ),
  oldName: types.string(),
  unchangedPercentage: types.optional(types.number()),
});

export function diffFilesFromJSON(
  jsonString: string,
): SafeParseResult<DiffFiles, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => DiffFiles$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'DiffFiles' from JSON`,
  );
}
