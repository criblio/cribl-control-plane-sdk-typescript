/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../lib/schemas.js";
import { catchUnrecognizedEnum, OpenEnum } from "../types/enums.js";
import { Result as SafeParseResult } from "../types/fp.js";
import { SDKValidationError } from "./errors/sdkvalidationerror.js";
import {
  HeartbeatMetadata,
  HeartbeatMetadata$inboundSchema,
} from "./heartbeatmetadata.js";
import {
  NodeProvidedInfo,
  NodeProvidedInfo$inboundSchema,
} from "./nodeprovidedinfo.js";
import {
  NodeUpgradeStatus,
  NodeUpgradeStatus$inboundSchema,
} from "./nodeupgradestatus.js";

export type LastMetrics = {};

export const MasterWorkerEntryType = {
  Info: "info",
  Req: "req",
  Resp: "resp",
} as const;
export type MasterWorkerEntryType = OpenEnum<typeof MasterWorkerEntryType>;

export type MasterWorkerEntryWorkers = {
  count: number;
};

export type MasterWorkerEntry = {
  deployable?: boolean | undefined;
  disconnected?: boolean | undefined;
  firstMsgTime: number;
  group: string;
  id: string;
  info: NodeProvidedInfo;
  lastMetrics?: LastMetrics | undefined;
  lastMsgTime: number;
  metadata?: HeartbeatMetadata | undefined;
  nodeUpgradeStatus?: NodeUpgradeStatus | undefined;
  status?: string | undefined;
  type?: MasterWorkerEntryType | undefined;
  workerProcesses: number;
  workers?: MasterWorkerEntryWorkers | undefined;
};

/** @internal */
export const LastMetrics$inboundSchema: z.ZodType<
  LastMetrics,
  z.ZodTypeDef,
  unknown
> = z.object({});

export function lastMetricsFromJSON(
  jsonString: string,
): SafeParseResult<LastMetrics, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => LastMetrics$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'LastMetrics' from JSON`,
  );
}

/** @internal */
export const MasterWorkerEntryType$inboundSchema: z.ZodType<
  MasterWorkerEntryType,
  z.ZodTypeDef,
  unknown
> = z
  .union([
    z.nativeEnum(MasterWorkerEntryType),
    z.string().transform(catchUnrecognizedEnum),
  ]);

/** @internal */
export const MasterWorkerEntryWorkers$inboundSchema: z.ZodType<
  MasterWorkerEntryWorkers,
  z.ZodTypeDef,
  unknown
> = z.object({
  count: z.number(),
});

export function masterWorkerEntryWorkersFromJSON(
  jsonString: string,
): SafeParseResult<MasterWorkerEntryWorkers, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => MasterWorkerEntryWorkers$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'MasterWorkerEntryWorkers' from JSON`,
  );
}

/** @internal */
export const MasterWorkerEntry$inboundSchema: z.ZodType<
  MasterWorkerEntry,
  z.ZodTypeDef,
  unknown
> = z.object({
  deployable: z.boolean().optional(),
  disconnected: z.boolean().optional(),
  firstMsgTime: z.number(),
  group: z.string(),
  id: z.string(),
  info: NodeProvidedInfo$inboundSchema,
  lastMetrics: z.lazy(() => LastMetrics$inboundSchema).optional(),
  lastMsgTime: z.number(),
  metadata: HeartbeatMetadata$inboundSchema.optional(),
  nodeUpgradeStatus: NodeUpgradeStatus$inboundSchema.optional(),
  status: z.string().optional(),
  type: MasterWorkerEntryType$inboundSchema.optional(),
  workerProcesses: z.number(),
  workers: z.lazy(() => MasterWorkerEntryWorkers$inboundSchema).optional(),
});

export function masterWorkerEntryFromJSON(
  jsonString: string,
): SafeParseResult<MasterWorkerEntry, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => MasterWorkerEntry$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'MasterWorkerEntry' from JSON`,
  );
}
