/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../lib/schemas.js";
import * as openEnums from "../types/enums.js";
import { OpenEnum } from "../types/enums.js";
import { Result as SafeParseResult } from "../types/fp.js";
import * as types from "../types/primitives.js";
import {
  ConnectionProtocol,
  ConnectionProtocol$inboundSchema,
} from "./connectionprotocol.js";
import { SDKValidationError } from "./errors/sdkvalidationerror.js";
import {
  HeartbeatMetadata,
  HeartbeatMetadata$inboundSchema,
} from "./heartbeatmetadata.js";
import {
  NodeProvidedInfo,
  NodeProvidedInfo$inboundSchema,
} from "./nodeprovidedinfo.js";
import {
  NodeUpgradeStatus,
  NodeUpgradeStatus$inboundSchema,
} from "./nodeupgradestatus.js";

export const MasterWorkerEntryType = {
  Info: "info",
  Req: "req",
  Resp: "resp",
} as const;
export type MasterWorkerEntryType = OpenEnum<typeof MasterWorkerEntryType>;

export type MasterWorkerEntryWorkers = {
  count: number;
};

export type MasterWorkerEntry = {
  connectionProtocol?: ConnectionProtocol | undefined;
  deployable?: boolean | undefined;
  disconnected?: boolean | undefined;
  firstMsgTime: number;
  group: string;
  id: string;
  info: NodeProvidedInfo;
  lastMetrics?: { [k: string]: any } | undefined;
  lastMsgTime: number;
  metadata?: HeartbeatMetadata | undefined;
  nodeUpgradeStatus?: NodeUpgradeStatus | undefined;
  status?: string | undefined;
  type?: MasterWorkerEntryType | undefined;
  workerProcesses: number;
  workers?: MasterWorkerEntryWorkers | undefined;
};

/** @internal */
export const MasterWorkerEntryType$inboundSchema: z.ZodType<
  MasterWorkerEntryType,
  z.ZodTypeDef,
  unknown
> = openEnums.inboundSchema(MasterWorkerEntryType);

/** @internal */
export const MasterWorkerEntryWorkers$inboundSchema: z.ZodType<
  MasterWorkerEntryWorkers,
  z.ZodTypeDef,
  unknown
> = z.object({
  count: types.number(),
});

export function masterWorkerEntryWorkersFromJSON(
  jsonString: string,
): SafeParseResult<MasterWorkerEntryWorkers, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => MasterWorkerEntryWorkers$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'MasterWorkerEntryWorkers' from JSON`,
  );
}

/** @internal */
export const MasterWorkerEntry$inboundSchema: z.ZodType<
  MasterWorkerEntry,
  z.ZodTypeDef,
  unknown
> = z.object({
  connectionProtocol: types.optional(ConnectionProtocol$inboundSchema),
  deployable: types.optional(types.boolean()),
  disconnected: types.optional(types.boolean()),
  firstMsgTime: types.number(),
  group: types.string(),
  id: types.string(),
  info: NodeProvidedInfo$inboundSchema,
  lastMetrics: types.optional(z.record(z.any())),
  lastMsgTime: types.number(),
  metadata: types.optional(HeartbeatMetadata$inboundSchema),
  nodeUpgradeStatus: types.optional(NodeUpgradeStatus$inboundSchema),
  status: types.optional(types.string()),
  type: types.optional(MasterWorkerEntryType$inboundSchema),
  workerProcesses: types.number(),
  workers: types.optional(z.lazy(() => MasterWorkerEntryWorkers$inboundSchema)),
});

export function masterWorkerEntryFromJSON(
  jsonString: string,
): SafeParseResult<MasterWorkerEntry, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => MasterWorkerEntry$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'MasterWorkerEntry' from JSON`,
  );
}
