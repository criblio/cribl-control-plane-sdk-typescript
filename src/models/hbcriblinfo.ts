/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../lib/schemas.js";
import { Result as SafeParseResult } from "../types/fp.js";
import * as types from "../types/primitives.js";
import { SDKValidationError } from "./errors/sdkvalidationerror.js";
import { HBLeaderInfo, HBLeaderInfo$inboundSchema } from "./hbleaderinfo.js";
import {
  ModeOptionsInstanceSettingsSchema,
  ModeOptionsInstanceSettingsSchema$inboundSchema,
} from "./modeoptionsinstancesettingsschema.js";

export type Config = {
  featuresRev?: string | undefined;
  hbPeriodSeconds?: number | undefined;
  logStreamEnv?: string | undefined;
  policyRev?: string | undefined;
  version?: string | undefined;
};

export type HBCriblInfo = {
  config: Config;
  deploymentId?: string | undefined;
  disableSNIRouting?: boolean | undefined;
  distMode: ModeOptionsInstanceSettingsSchema;
  edgeNodes?: number | undefined;
  group: string;
  guid: string;
  installType?: string | undefined;
  lookupVersions?: { [k: string]: { [k: string]: string } } | undefined;
  master?: HBLeaderInfo | undefined;
  pid?: number | undefined;
  socksEnabled?: boolean | undefined;
  startTime: number;
  tags: Array<string>;
  version?: string | undefined;
};

/** @internal */
export const Config$inboundSchema: z.ZodType<Config, z.ZodTypeDef, unknown> = z
  .object({
    featuresRev: types.optional(types.string()),
    hbPeriodSeconds: types.optional(types.number()),
    logStreamEnv: types.optional(types.string()),
    policyRev: types.optional(types.string()),
    version: types.optional(types.string()),
  });

export function configFromJSON(
  jsonString: string,
): SafeParseResult<Config, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Config$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Config' from JSON`,
  );
}

/** @internal */
export const HBCriblInfo$inboundSchema: z.ZodType<
  HBCriblInfo,
  z.ZodTypeDef,
  unknown
> = z.object({
  config: z.lazy(() => Config$inboundSchema),
  deploymentId: types.optional(types.string()),
  disableSNIRouting: types.optional(types.boolean()),
  distMode: ModeOptionsInstanceSettingsSchema$inboundSchema,
  edgeNodes: types.optional(types.number()),
  group: types.string(),
  guid: types.string(),
  installType: types.optional(types.string()),
  lookupVersions: types.optional(z.record(z.record(types.string()))),
  master: types.optional(HBLeaderInfo$inboundSchema),
  pid: types.optional(types.number()),
  socksEnabled: types.optional(types.boolean()),
  startTime: types.number(),
  tags: z.array(types.string()),
  version: types.optional(types.string()),
});

export function hbCriblInfoFromJSON(
  jsonString: string,
): SafeParseResult<HBCriblInfo, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => HBCriblInfo$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'HBCriblInfo' from JSON`,
  );
}
