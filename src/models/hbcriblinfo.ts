/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod/v3";
import { safeParse } from "../lib/schemas.js";
import { Result as SafeParseResult } from "../types/fp.js";
import { SDKValidationError } from "./errors/sdkvalidationerror.js";
import { HBLeaderInfo, HBLeaderInfo$inboundSchema } from "./hbleaderinfo.js";
import {
  ModeOptionsInstanceSettingsSchema,
  ModeOptionsInstanceSettingsSchema$inboundSchema,
} from "./modeoptionsinstancesettingsschema.js";

export type Config = {
  featuresRev?: string | undefined;
  hbPeriodSeconds?: number | undefined;
  logStreamEnv?: string | undefined;
  policyRev?: string | undefined;
  version?: string | undefined;
};

export type HBCriblInfo = {
  config: Config;
  deploymentId?: string | undefined;
  disableSNIRouting?: boolean | undefined;
  distMode: ModeOptionsInstanceSettingsSchema;
  edgeNodes?: number | undefined;
  group: string;
  guid: string;
  installType?: string | undefined;
  lookupVersions?: { [k: string]: { [k: string]: string } } | undefined;
  master?: HBLeaderInfo | undefined;
  pid?: number | undefined;
  socksEnabled?: boolean | undefined;
  startTime: number;
  tags: Array<string>;
  version?: string | undefined;
};

/** @internal */
export const Config$inboundSchema: z.ZodType<Config, z.ZodTypeDef, unknown> = z
  .object({
    featuresRev: z.string().optional(),
    hbPeriodSeconds: z.number().optional(),
    logStreamEnv: z.string().optional(),
    policyRev: z.string().optional(),
    version: z.string().optional(),
  });

export function configFromJSON(
  jsonString: string,
): SafeParseResult<Config, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => Config$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'Config' from JSON`,
  );
}

/** @internal */
export const HBCriblInfo$inboundSchema: z.ZodType<
  HBCriblInfo,
  z.ZodTypeDef,
  unknown
> = z.object({
  config: z.lazy(() => Config$inboundSchema),
  deploymentId: z.string().optional(),
  disableSNIRouting: z.boolean().optional(),
  distMode: ModeOptionsInstanceSettingsSchema$inboundSchema,
  edgeNodes: z.number().optional(),
  group: z.string(),
  guid: z.string(),
  installType: z.string().optional(),
  lookupVersions: z.record(z.record(z.string())).optional(),
  master: HBLeaderInfo$inboundSchema.optional(),
  pid: z.number().optional(),
  socksEnabled: z.boolean().optional(),
  startTime: z.number(),
  tags: z.array(z.string()),
  version: z.string().optional(),
});

export function hbCriblInfoFromJSON(
  jsonString: string,
): SafeParseResult<HBCriblInfo, SDKValidationError> {
  return safeParse(
    jsonString,
    (x) => HBCriblInfo$inboundSchema.parse(JSON.parse(x)),
    `Failed to parse 'HBCriblInfo' from JSON`,
  );
}
