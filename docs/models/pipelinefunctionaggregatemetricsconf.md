# PipelineFunctionAggregateMetricsConf

## Example Usage

```typescript
import { PipelineFunctionAggregateMetricsConf } from "cribl-control-plane/models";

let value: PipelineFunctionAggregateMetricsConf = {
  passthrough: false,
  preserveGroupBys: true,
  sufficientStatsOnly: true,
  prefix: "<value>",
  timeWindow: "<value>",
  aggregations: [
    {
      metricType: "timer",
      agg: "<value>",
    },
  ],
  groupbys: [
    "<value 1>",
    "<value 2>",
  ],
  flushEventLimit: 7350.81,
  flushMemLimit: "<value>",
  cumulative: false,
  shouldTreatDotsAsLiterals: false,
  add: [
    {
      name: "<value>",
      value: "<value>",
    },
  ],
  flushOnInputClose: false,
};
```

## Fields

| Field                                                                                                                                                                                                                                                                                                                                                                                                                                          | Type                                                                                                                                                                                                                                                                                                                                                                                                                                           | Required                                                                                                                                                                                                                                                                                                                                                                                                                                       | Description                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `passthrough`                                                                                                                                                                                                                                                                                                                                                                                                                                  | *boolean*                                                                                                                                                                                                                                                                                                                                                                                                                                      | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                             | Pass through the original events along with the aggregation events                                                                                                                                                                                                                                                                                                                                                                             |
| `preserveGroupBys`                                                                                                                                                                                                                                                                                                                                                                                                                             | *boolean*                                                                                                                                                                                                                                                                                                                                                                                                                                      | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                             | Preserve the structure of the original aggregation event's groupby fields                                                                                                                                                                                                                                                                                                                                                                      |
| `sufficientStatsOnly`                                                                                                                                                                                                                                                                                                                                                                                                                          | *boolean*                                                                                                                                                                                                                                                                                                                                                                                                                                      | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                             | Output only statistics that are sufficient for the supplied aggregations                                                                                                                                                                                                                                                                                                                                                                       |
| `prefix`                                                                                                                                                                                                                                                                                                                                                                                                                                       | *string*                                                                                                                                                                                                                                                                                                                                                                                                                                       | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                             | A prefix that is prepended to all of the fields output by this Aggregations Function                                                                                                                                                                                                                                                                                                                                                           |
| `timeWindow`                                                                                                                                                                                                                                                                                                                                                                                                                                   | *string*                                                                                                                                                                                                                                                                                                                                                                                                                                       | :heavy_check_mark:                                                                                                                                                                                                                                                                                                                                                                                                                             | The time span of the tumbling window for aggregating events. Must be a valid time string (such as 10s).                                                                                                                                                                                                                                                                                                                                        |
| `aggregations`                                                                                                                                                                                                                                                                                                                                                                                                                                 | [models.PipelineFunctionAggregateMetricsAggregation](../models/pipelinefunctionaggregatemetricsaggregation.md)[]                                                                                                                                                                                                                                                                                                                               | :heavy_check_mark:                                                                                                                                                                                                                                                                                                                                                                                                                             | Combination of Aggregation function and output metric type                                                                                                                                                                                                                                                                                                                                                                                     |
| `groupbys`                                                                                                                                                                                                                                                                                                                                                                                                                                     | *string*[]                                                                                                                                                                                                                                                                                                                                                                                                                                     | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                             | Optional: One or more dimensions to group aggregates by. Supports wildcard expressions. Wrap dimension names in quotes if using literal identifiers, such as 'service.name'. Warning: Using wildcard '*' causes all dimensions in the event to be included, which can result in high cardinality and increased memory usage. Exclude dimensions that can result in high cardinality before using wildcards. Example: !_time, !_numericValue, * |
| `flushEventLimit`                                                                                                                                                                                                                                                                                                                                                                                                                              | *number*                                                                                                                                                                                                                                                                                                                                                                                                                                       | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                             | The maximum number of events to include in any given aggregation event                                                                                                                                                                                                                                                                                                                                                                         |
| `flushMemLimit`                                                                                                                                                                                                                                                                                                                                                                                                                                | *string*                                                                                                                                                                                                                                                                                                                                                                                                                                       | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                             | The memory usage limit to impose upon aggregations. Defaults to 80% of the process memory; value configured above default limit is ignored. Accepts numerals with units like KB and MB (example: 128MB).                                                                                                                                                                                                                                       |
| `cumulative`                                                                                                                                                                                                                                                                                                                                                                                                                                   | *boolean*                                                                                                                                                                                                                                                                                                                                                                                                                                      | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                             | Enable to retain aggregations for cumulative aggregations when flushing out an aggregation table event. When disabled (the default), aggregations are reset to 0 on flush.                                                                                                                                                                                                                                                                     |
| `shouldTreatDotsAsLiterals`                                                                                                                                                                                                                                                                                                                                                                                                                    | *boolean*                                                                                                                                                                                                                                                                                                                                                                                                                                      | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                             | Treat dots in dimension names as literals. This is useful for top-level dimensions that contain dots, such as 'service.name'.                                                                                                                                                                                                                                                                                                                  |
| `add`                                                                                                                                                                                                                                                                                                                                                                                                                                          | [models.PipelineFunctionAggregateMetricsAdd](../models/pipelinefunctionaggregatemetricsadd.md)[]                                                                                                                                                                                                                                                                                                                                               | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                             | Set of key-value pairs to evaluate and add/set                                                                                                                                                                                                                                                                                                                                                                                                 |
| `flushOnInputClose`                                                                                                                                                                                                                                                                                                                                                                                                                            | *boolean*                                                                                                                                                                                                                                                                                                                                                                                                                                      | :heavy_minus_sign:                                                                                                                                                                                                                                                                                                                                                                                                                             | Flush aggregations when an input stream is closed. If disabled, Time Window Settings control flush behavior.                                                                                                                                                                                                                                                                                                                                   |